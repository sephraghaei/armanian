# راهنمای راه‌اندازی پنل مدیریت

## تنظیم دسترسی ادمین

برای دادن دسترسی مدیریتی به یک کاربر، مراحل زیر را دنبال کنید:

### روش 1: استفاده از SQL Editor در Supabase

1. به داشبورد Supabase خود بروید
2. به بخش SQL Editor بروید
3. کوئری زیر را اجرا کنید (شماره تلفن کاربر را جایگزین کنید):

```sql
SELECT public.make_user_admin('989123456789');
```

**نکته:** شماره تلفن باید بدون فاصله و با کد کشور باشد (مثال: 989123456789)

### روش 2: دستی از طریق جدول user_roles

1. ابتدا ID کاربر را از جدول `users_app` پیدا کنید
2. سپس یک رکورد جدید در جدول `user_roles` اضافه کنید:

```sql
INSERT INTO public.user_roles (user_id, role)
VALUES ('USER_ID_HERE', 'admin');
```

## دسترسی به پنل مدیریت

بعد از اینکه یک کاربر به عنوان ادمین تنظیم شد:

1. کاربر باید از حساب خود خارج شود و دوباره وارد شود
2. در منوی کاربری (گوشه بالا سمت راست) گزینه "پنل مدیریت" نمایش داده می‌شود
3. با کلیک روی این گزینه به پنل مدیریت وارد می‌شود

## امکانات پنل مدیریت

### مدیریت دوره‌ها
- ایجاد دوره جدید
- ویرایش دوره‌های موجود
- حذف دوره‌ها
- تنظیم دوره‌های محبوب

### مشاهده ثبت‌نام‌ها
- لیست تمام کاربران ثبت‌نام شده در دوره‌ها
- اطلاعات تماس کاربران
- وضعیت ثبت‌نام (فعال/غیرفعال)
- تاریخ ثبت‌نام و انقضا
- امکان حذف ثبت‌نام‌ها

## نکات امنیتی

- فقط کاربرانی که در جدول `user_roles` با نقش `admin` ثبت شده‌اند به پنل مدیریت دسترسی دارند
- این بررسی هم در سمت کلاینت و هم در سمت سرور (RLS policies) انجام می‌شود
- هرگز به کاربران عادی دسترسی ادمین ندهید
